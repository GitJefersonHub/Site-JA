<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>QR Codes Personalizados</title>
  <!-- Bibliotecas para QR Code e PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 2rem;
      background-color: #f9f9f9;
    }

    h2 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .data-hora {
      text-align: center;
      font-size: 1rem;
      margin-bottom: 2rem;
      color: #555;
    }

    .qr-container {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
    }

    .qr-box {
      text-align: center;
    }

    .qr-box p {
      font-size: 1rem;
      margin-top: 0.5rem;
      font-weight: bold;
    }

    .btn-exportar {
      display: block;
      margin: 2rem auto;
      padding: 1rem 2rem;
      font-size: 1rem;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .btn-exportar:hover {
      background-color: #0056b3;
    }

    .qr-box {
      text-align: center;
      page-break-inside: avoid;
    }
  </style>
</head>

<body>
  <!-- √Årea que ser√° convertida em PDF -->
  <div id="conteudoPDF">
    <h2>QR Codes Personalizados</h2>
    <div class="data-hora" id="dataHoraPDF"></div>

    <div class="qr-container">
      <div class="qr-box">
        <div id="qr0"></div>
        <p>Abertura</p>
      </div>
      <div class="qr-box">
        <div id="qr1"></div>
        <p>1¬∞ Andar</p>
      </div>
      <div class="qr-box">
        <div id="qr2"></div>
        <p>2¬∞ Andar</p>
      </div>
      <div class="qr-box">
        <div id="qr3"></div>
        <p>3¬∞ Andar</p>
      </div>
      <div class="qr-box">
        <div id="qr4"></div>
        <p>4¬∞ Andar</p>
      </div>
      <div class="qr-box">
        <div id="qr5"></div>
        <p>5¬∞ Andar</p>
      </div>
      <div class="qr-box">
        <div id="qr6"></div>
        <p>Externo A</p>
      </div>
      <div class="qr-box">
        <div id="qr7"></div>
        <p>Externo B</p>
      </div>
      <div class="qr-box">
        <div id="qr8"></div>
        <p>Externo C</p>
      </div>
      <div class="qr-box">
        <div id="qr9"></div>
        <p>Fechamento</p>
      </div>

      <!-- üîß Para adicionar mais QR Codes:
           1. Crie um novo <div class="qr-box"> com id="qr10", "qr11", etc.
           2. Adicione o nome de identifica√ß√£o no <p>.
           3. Inclua o novo c√≥digo na lista 'codigos' no script abaixo.
      -->
    </div>
  </div>

  <button class="btn-exportar" onclick="visualizarPDF()">üëÅÔ∏è Visualizar PDF</button>

  <script>
    // Lista de c√≥digos que ser√£o convertidos em QR Codes
    const codigos = [
      { id: "qr0", valor: "0" },
      { id: "qr1", valor: "1" },
      { id: "qr2", valor: "2" },
      { id: "qr3", valor: "3" },
      { id: "qr4", valor: "4" },
      { id: "qr5", valor: "5" },
      { id: "qr6", valor: "6" },
      { id: "qr7", valor: "7" },
      { id: "qr8", valor: "8" },
      { id: "qr9", valor: "9" }
    ];

    // Gera os QR Codes
    codigos.forEach(c => {
      new QRCode(document.getElementById(c.id), {
        text: c.valor,
        width: 128,
        height: 128
      });
    });

    // Insere data e hora atual no PDF
    const agora = new Date();
    const formatado = agora.toLocaleString('pt-BR', {
      day: '2-digit',
      month: 'long',
      year: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
    document.getElementById("dataHoraPDF").textContent = `Gerado em: ${formatado}`;

    // Visualiza o PDF em nova aba
    function visualizarPDF() {
      const elemento = document.getElementById("conteudoPDF");

      const opt = {
        margin: [2, 10, 20, 10], // top, left, bottom, right (em mm)
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 1.5 },
        jsPDF: {
          unit: 'mm',//Quando usar ajuste tamb√©m margim
          format: 'a4',//
          orientation: 'portrait'
        }
      };

      html2pdf().set(opt).from(elemento).toPdf().get('pdf').then(pdf => {
        const blob = pdf.output('blob');
        const url = URL.createObjectURL(blob);
        window.open(url, '_blank');
      });
    }

  </script>
</body>

</html>