<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <link rel="stylesheet" href="css/login.css">
</head>

<body>
  <div class="login-container">
    <h2>Login</h2>
    <form id="loginForm">
      <label for="nome">Nome:</label>
      <input type="text" id="nome" name="nome" required placeholder="Digite o seu nome">

      <label for="matricula">Matrícula:</label>
      <input type="text" id="matricula" name="matricula" required maxlength="6" placeholder="Digite sua matrícula">

      <label for="telefone">Telefone:</label>
      <input type="tel" id="telefone" name="telefone" required placeholder="Digite o seu telefone">

      <label for="email">E-mail:</label>
      <input type="email" id="email" name="email" required placeholder="Digite o seu Email">

      <label for="senha">Senha:</label>
      <div class="senha-container">
        <input type="password" id="senha" name="senha" required maxlength="6" placeholder="Digite sua senha">
        <span id="toggleIcon" onclick="toggleSenha()" style="
          position: absolute;
          right: 2%;
          top: 50%;
          transform: translateY(-50%);
          font-size: 400%;
          cursor: pointer;
          color: #007bff;
          user-select: none;
        ">👁️</span>
      </div>

      <button type="submit">Entrar</button>
    </form>
    <p id="mensagem"></p>
  </div>

  <script>
    // Máscara para telefone
    document.getElementById('telefone').addEventListener('input', function (e) {
      let input = e.target.value.replace(/\D/g, '');
      if (input.length > 11) input = input.slice(0, 11);

      let formatted = '';
      if (input.length > 0) {
        formatted += '(' + input.substring(0, 2);
      }
      if (input.length >= 3) {
        formatted += ') ';
        if (input.length >= 7) {
          if (input.length >= 11 || input[2] === '9') {
            formatted += input.substring(2, 7) + '-' + input.substring(7, 11);
          } else {
            formatted += input.substring(2, 6) + '-' + input.substring(6, 10);
          }
        } else {
          formatted += input.substring(2);
        }
      }
      e.target.value = formatted;
    });

    // Bloqueia letras no campo de senha
    document.getElementById('senha').addEventListener('input', function (e) {
      e.target.value = e.target.value.replace(/\D/g, '').slice(0, 6);
    });

    // Mostrar/ocultar senha
    function toggleSenha() {
      const senhaInput = document.getElementById('senha');
      const toggleIcon = document.getElementById('toggleIcon');
      if (senhaInput.type === 'password') {
        senhaInput.type = 'text';
        toggleIcon.textContent = '🙈';
      } else {
        senhaInput.type = 'password';
        toggleIcon.textContent = '👁️';
      }
    }

    // Validação do formulário
    document.getElementById('loginForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const nome = document.getElementById('nome').value.trim();
      const matricula = document.getElementById('matricula').value.trim();
      const telefone = document.getElementById('telefone').value.trim();
      const email = document.getElementById('email').value.trim();
      const senha = document.getElementById('senha').value.trim();
      const mensagem = document.getElementById('mensagem');

      if (!nome || !matricula || !telefone || !email || !senha) {
        mensagem.textContent = 'Todos os campos são obrigatórios.';
        mensagem.style.color = 'red';
        return;
      }

      const usuariosCadastrados = [
        {
          nome: 'Jeferson',
          matricula: '1976',
          telefone: '(62) 98250-2200',
          email: 'jefersonalves.ti@gmail.com',
          senha: '123456'
        },
        {
          nome: 'Gilmacy',
          matricula: '1973',
          telefone: '(62) 98182-2794',
          email: 'gilmacytavares@gmail.com',
          senha: '123456'
        },
        {
          nome: 'Cristyma',
          matricula: '2012',
          telefone: '(62) 00000-0000',
          email: 'cristymatavares@gmail.com',
          senha: '123456'
        }
      ];

      const usuarioValido = usuariosCadastrados.find(user =>
        user.nome === nome &&
        user.matricula === matricula &&
        user.telefone === telefone &&
        user.email === email &&
        user.senha === senha
      );

      if (usuarioValido) {
        localStorage.setItem('usuarioLogado', 'true');
        localStorage.setItem('dadosUsuario', JSON.stringify(usuarioValido));
        mensagem.style.color = 'green';
        mensagem.textContent = 'Login bem-sucedido!';

        // Limpa o formulário
        document.getElementById('loginForm').reset();

        // Redireciona sem deixar histórico
        setTimeout(() => {
          location.replace('painel.html');
        }, 1500);
      } else {
        mensagem.style.color = 'red';
        mensagem.textContent = 'Credenciais inválidas. Tente novamente.';
      }
    });
  </script>
</body>

</html>